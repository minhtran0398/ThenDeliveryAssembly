@page "/order-of-merchant/{MerchantId:int}"
@inherits MerchantOrderListBase

@if (OrderList is null)
{
   <p>Loading...</p>
}
else if(OrderList.Count == 0)
{
   <p>Chưa có đơn hàng cho quán này</p>
}
else
{
   <div class="list-group">
      @foreach (var order in OrderList.OrderBy(e => e.Status)
                                       .ThenByDescending(e => e.DeliveryDateTime)
                                       .ThenByDescending(e => e.OrderDateTime))
      {
         <a href="javascript:void(0)"
            class="list-group-item list-group-item-action
                  @(GetColorCssOrderStatus(order.Status))">
            <div class="d-flex w-100 justify-content-between">
               <h5 class="mb-1 font-weight-bold">@order.User.UserName - @order.User.PhoneNumber</h5>
               <small>@TimeRange.GetDurationStringToNow(order.OrderDateTime)</small>
            </div>
            <div class="d-flex w-100 justify-content-between pb-2">
               <h6 class="mb-1 font-small">Thời gian giao: @order.DeliveryDateTime.ToString("HH:mm dd/MM/yyyy")</h6>
            </div>
            @foreach (var orderItem in order.OrderItemList)
            {
               <div class="pb-2 w-100">
                  <div class="d-flex w-100 justify-content-between">
                     <p class="mb-0" style="font-weight:700;text-decoration:underline">
                        @orderItem.OrderProductToppingName
                     </p>
                     <span class="badge badge-success badge-pill" style="line-height:1.5">@orderItem.Quantity phần</span>
                  </div>
                  @if (!string.IsNullOrWhiteSpace(orderItem.Note))
                  {
                     <p class="mb-0 font-small font-italic">Ghi chú: @orderItem.Note</p>
                  }
               </div>
            }
         </a>
      }
   </div>
}

